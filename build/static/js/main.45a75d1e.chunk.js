(this["webpackJsonpsharetouring-places"]=this["webpackJsonpsharetouring-places"]||[]).push([[0],{14:function(e,t,n){e.exports={putImage:"send_putImage__26AlY",selectImage:"send_selectImage__1yWu2",submit:"send_submit__1Csjy"}},18:function(e,t,n){e.exports={header:"Header_header__2XAj3"}},20:function(e,t,n){e.exports={title:"print_title__32tcE"}},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(5),c=n.n(a),o=n(17),r=n.n(o),s=n(8),i=n(9),u=n(11),l=n(10),d=n(18),p=n.n(d),h=n(3),j=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsx)("h1",{className:p.a.header,children:"Share Touring Places"})}}]),n}(c.a.Component),b=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsx)("div",{children:"footer"})}}]),n}(c.a.Component),g=n(13);n(32),n(31),n(33),n(27);g.a.initializeApp({apiKey:"AIzaSyBVnd60ekX4LpYPppbu9qZFLfLh1OStHOM",authDomain:"share-touring-plases.firebaseapp.com",projectId:"share-touring-plases",storageBucket:"share-touring-plases.appspot.com",messagingSenderId:"177272219186",appId:"1:177272219186:web:dfbd1c3ea441dbb1f5be2b"}),g.a.analytics(),g.a.auth().languageCode="it";var f=g.a.firestore(),O=f.collection("places"),m=g.a.storage(),v=g.a.auth.TwitterAuthProvider(),x=g.a,y=n(20),I=n.n(y),C=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return f.collection("places").orderBy("created").onSnapshot((function(e){var t=document.getElementById("printPlaces");e.docChanges().forEach((function(e){if("added"===e.type){var n=document.createElement("li"),a=document.createElement("img"),c=document.createElement("div");m.ref().child("images/".concat(e.doc.data().place,".png")).getDownloadURL().then((function(e){a.src=e})).catch((function(e){e.code})),n.textContent=e.doc.data().place,c.appendChild(a),c.appendChild(n),t.prepend(c)}}))})),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{className:I.a.title,children:"\u30c4\u30fc\u30ea\u30f3\u30b0\u30b9\u30dd\u30c3\u30c8\u4e00\u89a7"}),Object(h.jsx)("ul",{id:"printPlaces"})]})}}]),n}(c.a.Component),k=n(14),_=n.n(k),S=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={place:"",image:"",progress:"\u753b\u50cf\u3092\u9078\u629e"},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=document.getElementById("putPlace"),n=document.getElementById("putImage");return Object(h.jsxs)("div",{children:["\u4f4d\u7f6e\u60c5\u5831",Object(h.jsxs)("form",{onSubmit:function(a){if(a.preventDefault(),""!==t.value&&""!==n.value){e.setState({progress:"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u4e2d..."});var c=x.storage().ref().child("images/".concat(e.state.place,".png")).put(e.state.image);c.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case x.storage.TaskState.PAUSED:console.log("Upload is paused");break;case x.storage.TaskState.RUNNING:console.log("Upload is running")}}),(function(e){console.log(e)}),(function(){e.setState({progress:"\u753b\u50cf\u3092\u9078\u629e"}),c.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),O.add({place:t.value,created:x.firestore.FieldValue.serverTimestamp()}).then((function(){t.value="",t.focus()})).catch((function(e){console.log(e)}))}))}))}else t.focus()},children:[Object(h.jsx)("textarea",{id:"putPlace",value:this.state.place,onChange:function(t){!function(t){var n=t.target.value;e.setState({place:n})}(t)}}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{htmlFor:"putImage",className:_.a.selectImage,children:this.state.progress}),Object(h.jsx)("input",{id:"putImage",className:_.a.putImage,type:"file",onChange:function(t){return function(t){var n=t.target.files[0];e.setState({image:n})}(t)}}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{className:_.a.submit,children:"\u9001\u4fe1"})]})]})}}]),n}(c.a.Component),L=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).handleLogin=function(){x.auth().signInWithPopup(v).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},e.handleLogout=function(){x.auth().signOut().then((function(){console.log("Sucsess sign in")})).catch((function(e){console.log(e)}))},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:this.handleLogin,children:"Login"}),Object(h.jsx)("button",{onClick:this.handleLogout,children:"Logout"})]})}}]),n}(c.a.Component),E=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(j,{}),Object(h.jsx)(L,{}),Object(h.jsx)(S,{}),Object(h.jsx)(C,{}),Object(h.jsx)(b,{})]})}}]),n}(c.a.Component),P=(n(29),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsx)(E,{})}}]),n}(c.a.Component));r.a.render(Object(h.jsx)(P,{}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.45a75d1e.chunk.js.map