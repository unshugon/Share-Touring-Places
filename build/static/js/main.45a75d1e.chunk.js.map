{"version":3,"sources":["components/send.module.scss","components/Header.module.scss","components/print.module.scss","components/Header.js","components/Footer.js","Firebase.js","firebaseConfig.js","components/Print.js","components/Send.js","components/Auth.js","components/Main.js","components/App.js","index.js"],"names":["module","exports","Header","className","headerStyle","header","React","Component","Footer","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","analytics","auth","languageCode","db","firestore","places","collection","storage","providerTwitter","TwitterAuthProvider","Print","orderBy","onSnapshot","snapshot","printPlaces","document","getElementById","docChanges","forEach","change","type","li","createElement","img","div","ref","child","doc","data","place","getDownloadURL","then","url","src","catch","error","code","textContent","appendChild","prepend","printStyle","title","id","Send","props","state","image","progress","putPlace","putImage","onSubmit","e","preventDefault","value","setState","uploadTask","put","on","bytesTransferred","totalBytes","console","log","TaskState","PAUSED","RUNNING","downloadURL","add","created","FieldValue","serverTimestamp","focus","this","onChange","event","inputValue","target","handleFormChange","htmlFor","sendStyle","selectImage","inputImage","files","handleImage","submit","Auth","handleLogin","signInWithPopup","res","handleLogout","signOut","onClick","Main","App","ReactDOM","render"],"mappings":"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","file":"static/js/main.45a75d1e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"putImage\":\"send_putImage__26AlY\",\"selectImage\":\"send_selectImage__1yWu2\",\"submit\":\"send_submit__1Csjy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2XAj3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"print_title__32tcE\"};","import React from \"react\";\nimport headerStyle from \"./Header.module.scss\";\n\nclass Header extends React.Component {\n  render() {\n    return (\n    <h1 className={headerStyle.header}>Share Touring Places</h1>\n    );\n  }\n}\n\nexport default Header;\n","import React from \"react\";\n\nclass Footer extends React.Component {\n  render() {\n    return(\n      <div>\n        footer\n      </div>\n    );\n  };\n}\n\nexport default Footer;\n","import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/analytics';\nimport 'firebase/storage';\nimport 'firebase/auth';\nimport {firebaseConfig} from \"./firebaseConfig\";\n\nfirebase.initializeApp(firebaseConfig);\nfirebase.analytics();\nfirebase.auth().languageCode = \"it\";\n\nexport const db = firebase.firestore();\nexport const places = db.collection('places');\nexport const storage = firebase.storage();\nexport const providerTwitter = firebase.auth.TwitterAuthProvider();\nexport default firebase;\n","export const firebaseConfig = {\n  apiKey: \"AIzaSyBVnd60ekX4LpYPppbu9qZFLfLh1OStHOM\",\n  authDomain: \"share-touring-plases.firebaseapp.com\",\n  projectId: \"share-touring-plases\",\n  storageBucket: \"share-touring-plases.appspot.com\",\n  messagingSenderId: \"177272219186\",\n  appId: \"1:177272219186:web:dfbd1c3ea441dbb1f5be2b\"\n};\n","import React from \"react\";\nimport {db, storage} from \"../../src/Firebase\";\nimport printStyle from \"./print.module.scss\";\n\nclass Print extends React.Component {\n  render() {\n    const collection = db.collection(\"places\");\n\n    collection.orderBy(\"created\").onSnapshot((snapshot) => {\n      const printPlaces = document.getElementById(\"printPlaces\");\n\n      snapshot.docChanges().forEach((change) => {\n        if(change.type === 'added'){\n          const li = document.createElement(\"li\");\n          const img = document.createElement(\"img\");\n          const div = document.createElement(\"div\");\n          const storageRef = storage.ref();\n          const imageRef = storageRef.child(`images/${change.doc.data().place}.png`);\n\n          imageRef.getDownloadURL()\n            .then((url) => {\n              img.src = url;\n            })\n            .catch((error) => {\n              switch (error.code) {\n                case 'storage/object-not-found':\n                  // File doesn't exist\n                  break;\n\n                case 'storage/unauthorized':\n                  // User doesn't have permission to access the object\n                  break;\n\n                case 'storage/canceled':\n                  // User canceled the upload\n                  break;\n\n                case 'storage/unknown':\n                  // Unknown error occurred, inspect the server response\n                  break;\n\n                default:\n                  break;\n              }\n            });\n\n            li.textContent = change.doc.data().place;\n\n            div.appendChild(img);\n            div.appendChild(li);\n            printPlaces.prepend(div);\n        };\n      });\n    });\n\n    return(\n      <div>\n        <h2 className={printStyle.title}>ツーリングスポット一覧</h2>\n        <ul id=\"printPlaces\"></ul>\n      </div>\n    );\n  };\n}\n\nexport default Print;\n","import React from \"react\";\nimport firebase, {places} from \"../../src/Firebase\";\nimport sendStyle from \"./send.module.scss\";\n\nclass Send extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      place: \"\", \n      image: \"\",\n      progress: \"画像を選択\"\n    }\n  };\n\n  render() {\n    const handleFormChange = (event) => {\n      const inputValue = event.target.value;\n      this.setState({place: inputValue});\n    };\n\n    const handleImage = (event) => {\n      const inputImage = event.target.files[0];\n      this.setState({image: inputImage});\n    };\n\n    const putPlace = document.getElementById(\"putPlace\");\n    const putImage = document.getElementById(\"putImage\");\n    \n    const onSubmit = (e) => {\n      e.preventDefault();\n\n      if(putPlace.value === \"\" || putImage.value === \"\"){\n        putPlace.focus();\n        return;\n      };\n\n      this.setState({progress: \"アップロード中...\"});\n      const doneUpload = () => {this.setState({progress: \"画像を選択\"})};\n\n      let imageRef = firebase.storage().ref().child(`images/${this.state.place}.png`);\n      const uploadTask = imageRef.put(this.state.image);\n\n      uploadTask.on('state_changed', snapshot =>{\n        // Observe state change events such as progress, pause, and resume\n        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        console.log('Upload is ' + progress + '% done');\n        switch (snapshot.state) {\n          case firebase.storage.TaskState.PAUSED: // or 'paused'\n            console.log('Upload is paused');\n            break;\n          case firebase.storage.TaskState.RUNNING: // or 'running'\n            console.log('Upload is running');\n            break;\n\n          default:\n            break;\n        };\n      }, function (error) {\n        console.log(error);\n      }, function () {\n        doneUpload();\n        // Handle successful uploads on complete\n        uploadTask.snapshot.ref.getDownloadURL().then(downloadURL => {\n          console.log('File available at', downloadURL);\n          places.add({\n            place: putPlace.value, \n            created: firebase.firestore.FieldValue.serverTimestamp()\n          })\n          .then(() => {\n            putPlace.value = \"\";\n            putPlace.focus();\n          })\n          .catch(error => {\n            console.log(error);\n          })\n        });\n      });\n    };\n\n  return(\n      <div>\n        位置情報\n        <form onSubmit={onSubmit}>\n          <textarea\n          id=\"putPlace\"\n          value={this.state.place}\n          onChange={(event) => {handleFormChange(event)}}\n          />\n          <br/>\n          <label htmlFor=\"putImage\" className={sendStyle.selectImage}>\n            {this.state.progress}\n          </label>\n          <input\n          id=\"putImage\"\n          className={sendStyle.putImage}\n          type=\"file\"\n          onChange={(event) => handleImage(event)}\n          />\n          <br/>\n          <button className={sendStyle.submit}>送信</button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Send;\n","import React from 'react';\nimport firebase, {providerTwitter} from \"../Firebase\";\n\nclass Auth extends React.Component{\n  handleLogin = () => {\n    firebase.auth().signInWithPopup(providerTwitter)\n    .then(res => {\n      console.log(res);\n      //TODO: ex. storeに送信, DB保存,...\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  handleLogout = () => {\n    firebase.auth().signOut().then(() => {\n      console.log(\"Sucsess sign in\")\n    }).catch((error) => {\n      console.log(error);\n    });\n  };\n\n  render(){\n    return(\n      <div>\n        <button onClick={this.handleLogin}>Login</button>\n        <button onClick={this.handleLogout}>Logout</button>        \n      </div>\n    );\n  }\n};\n\nexport default Auth;\n","import React from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Print from \"./Print\";\nimport Send from \"./Send\";\nimport Auth from\"./Auth\";\n\nclass Main extends React.Component {\n  render() {\n    return(\n      <div>\n        <Header />\n        <Auth />\n        <Send />\n        <Print />\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default Main;\n","import React from \"react\";\nimport Main from \"./Main\";\nimport appStyle from \"./app.module.scss\";\n\nclass App extends React.Component {\n  render() {\n    return <Main />;\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}