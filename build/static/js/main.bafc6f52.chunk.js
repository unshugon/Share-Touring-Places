(this["webpackJsonpshate-touring-spot"]=this["webpackJsonpshate-touring-spot"]||[]).push([[0],{12:function(e,t,n){e.exports={container:"home_container__1nxKu",logout:"home_logout__2rfpM",header:"home_header__1JqHy",loading:"home_loading__3xLzJ",loadingLetter:"home_loadingLetter__fentm"}},22:function(e,t,n){e.exports={container:"send_container__b8jLI",putImage:"send_putImage__xhmR7",submit:"send_submit__2DNck",putPlace:"send_putPlace__u75bJ",putDescription:"send_putDescription__28p2m",putImageLabel:"send_putImageLabel__10g3a",submitLabel:"send_submitLabel__dsfa_"}},25:function(e,t,n){e.exports={container:"login_container__11d0V",twitter:"login_twitter__10FKh",anonymous:"login_anonymous__1JTzJ",header:"login_header__cqkmX"}},30:function(e,t,n){e.exports={container:"print_container__1baIC",printPlaces:"print_printPlaces__SypZh",title:"print_title__1zc15"}},52:function(e,t,n){},53:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),s=n(41),c=n.n(s),o=(n(52),n(15)),r=n(16),l=n(18),d=n(17),u=(n(53),n(28)),p=n(6),h=n(20);n(74),n(73),n(75),n(54);h.a.initializeApp({apiKey:"AIzaSyBVnd60ekX4LpYPppbu9qZFLfLh1OStHOM",authDomain:"share-touring-plases.firebaseapp.com",projectId:"share-touring-plases",storageBucket:"share-touring-plases.appspot.com",messagingSenderId:"177272219186",appId:"1:177272219186:web:dfbd1c3ea441dbb1f5be2b"}),h.a.analytics(),h.a.auth().languageCode="ja";var b=h.a.firestore(),j=b.collection("places"),g=h.a.storage(),m=h.a.auth(),f=new h.a.auth.TwitterAuthProvider,O=(h.a.auth().currentUser,h.a),_=n(77),x=n(33),v=n.n(x),y=n(43),C=n(22),S=n.n(C),N=n(44),I=n.n(N),L=n(4),k=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChangeFile=function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files,e.next=3,I()(n[0],{maxWidth:450,canvas:!0});case 3:e.sent.image.toBlob((function(e){a.setState({blob:e})}),n[0].type),a.state.blob;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleFormChange=function(e){var t=e.target.value;a.setState({place:t})},a.handleDescChange=function(e){var t=e.target.value;a.setState({description:t})},a.handleUpload=function(e){return a.props.handleUpload(e)},a.state={place:"",description:"",image:null,blob:null},a}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=document.getElementById("putPlace"),n=document.getElementById("putDescription"),a=document.getElementById("putImage"),i=this.props;return Object(L.jsxs)("div",{className:S.a.container,children:["\u304a\u3059\u3059\u3081\u30b9\u30dd\u30c3\u30c8\u3092\u6295\u7a3f",Object(L.jsxs)("form",{onSubmit:function(i){i.preventDefault();if(""!==t.value&&""!==a.value){e.handleUpload(!0);var s=O.storage().ref().child("images/".concat(e.state.place,"_").concat(e.state.description,".jpg")).put(e.state.blob);s.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case O.storage.TaskState.PAUSED:console.log("Upload is paused");break;case O.storage.TaskState.RUNNING:console.log("Upload is running")}}),(function(e){console.log(e)}),(function(){e.handleUpload(!1),s.snapshot.ref.getDownloadURL().then((function(){j.add({place:t.value,description:n.value,created:O.firestore.FieldValue.serverTimestamp(),user:m.currentUser.uid}).then((function(){t.value="",n.value="",t.focus()})).catch((function(e){console.log(e)}))}))}))}else t.focus()},children:[Object(L.jsx)("textarea",{id:"putPlace",className:S.a.putPlace,value:this.state.place,onChange:function(t){return e.handleFormChange(t)},placeholder:"\u5730\u540d\u3092\u5165\u529b..."}),Object(L.jsx)("br",{}),Object(L.jsx)("textarea",{id:"putDescription",className:S.a.putDescription,value:this.state.description,onChange:function(t){return e.handleDescChange(t)},placeholder:"\u304a\u3059\u3059\u3081\u30dd\u30a4\u30f3\u30c8\u3092\u5165\u529b..."}),Object(L.jsx)("br",{}),Object(L.jsx)("label",{htmlFor:"putImage",className:S.a.putImageLabel,children:null==this.state.blob?"\u753b\u50cf\u3092\u9078\u629e":"\u753b\u50cf\u3092\u5909\u66f4"}),Object(L.jsx)("input",{id:"putImage",className:S.a.putImage,type:"file",accept:"image/*",onChange:function(t){return e.handleChangeFile(t)}}),Object(L.jsx)("br",{}),Object(L.jsx)("label",{htmlFor:"submit",className:S.a.submitLabel,children:i.progress?"Uploading...":"\u6295\u7a3f"}),Object(L.jsx)("button",{id:"submit",className:S.a.submit})]})]})}}]),n}(i.a.Component),w=n(30),M=n.n(w),U=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return b.collection("places").orderBy("created").onSnapshot((function(e){var t=document.getElementById("printPlaces");e.docChanges().forEach((function(e){if("added"===e.type){var n=document.createElement("li"),a=document.createElement("p"),i=document.createElement("img"),s=document.createElement("div");g.ref().child("images/".concat(e.doc.data().place,"_").concat(e.doc.data().description,".jpg")).getDownloadURL().then((function(e){i.src=e})).catch((function(e){e.code})),n.textContent=e.doc.data().place,a.textContent=e.doc.data().description,s.appendChild(i),s.appendChild(n),s.appendChild(a),t.prepend(s)}}))})),Object(L.jsxs)("div",{className:M.a.container,children:[Object(L.jsx)("h2",{className:M.a.title,children:"\u30c4\u30fc\u30ea\u30f3\u30b0\u30b9\u30dd\u30c3\u30c8\u4e00\u89a7"}),Object(L.jsx)("ul",{id:"printPlaces",className:M.a.printPlaces})]})}}]),n}(i.a.Component),D=n(12),P=n.n(D),T=n(78),F=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleLogout=function(){O.auth().signOut()},a.handleUpload=function(e){a.setState({progress:e})},a.state={progress:!1},a}return Object(r.a)(n,[{key:"render",value:function(){var e=this;return this.state.progress?Object(L.jsx)("div",{className:P.a.loadingContainer,children:Object(L.jsxs)("span",{variant:"primary",disabled:!0,className:P.a.loading,children:[Object(L.jsx)(T.a,{as:"span",animation:"border",role:"status","aria-hidden":"false"}),Object(L.jsx)("span",{className:P.a.loadingLetter,children:"Loading..."})]})}):Object(L.jsxs)("div",{className:P.a.container,children:[Object(L.jsx)("h1",{className:P.a.header,children:"Share Touring Spot"}),Object(L.jsx)(_.a,{onClick:this.handleLogout,className:P.a.logout,children:"\u30ed\u30b0\u30a2\u30a6\u30c8"}),Object(L.jsx)(k,{handleUpload:function(t){e.handleUpload(t)},hometState:this.state}),Object(L.jsx)(U,{})]})}}]),n}(i.a.Component),B=n(46),E=n(45),A=n(25),J=n.n(A),z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={loading:!1},e._isMounted=!1,e.handleOnSubmitT=function(t){e._isMounted&&e.setState({loading:!0}),O.auth().signInWithPopup(f).then((function(t){e.props.history.push("/"),e._isMounted&&e.setState({loading:!1})})).catch((function(t){e._isMounted&&e.setState({loading:!1}),alert(t)}))},e.handleOnSubmitA=function(t){e._isMounted&&e.setState({loading:!0}),O.auth().signInAnonymously().then((function(t){e.props.history.push("/"),e._isMounted&&e.setState({loading:!1})})).catch((function(t){e._isMounted&&e.setState({loading:!1}),alert(t)}))},e.componentDidMount=function(){e._isMounted=!0},e.componentWillUnmount=function(){e._isMounted=!1},e}return Object(r.a)(n,[{key:"render",value:function(){return this.state.loading?Object(L.jsx)("div",{className:P.a.loadingContainer,children:Object(L.jsxs)("span",{variant:"primary",disabled:!0,className:P.a.loading,children:[Object(L.jsx)(T.a,{as:"span",animation:"border",role:"status","aria-hidden":"false"}),Object(L.jsx)("span",{className:P.a.loadingLetter,children:"Loading..."})]})}):Object(L.jsx)("div",{className:J.a.container,children:Object(L.jsxs)("div",{className:J.a.wrapper,children:[Object(L.jsx)("h1",{className:J.a.header,children:"Share Touring Spot"}),Object(L.jsxs)("button",{onClick:this.handleOnSubmitT,id:"loginTwitter",className:J.a.twitter,children:[Object(L.jsx)(E.a,{icon:B.a})," Login with Twitter"]}),Object(L.jsx)("button",{onClick:this.handleOnSubmitA,className:J.a.anonymous,children:"\u533f\u540d\u30ed\u30b0\u30a4\u30f3"})]})})}}]),n}(i.a.Component),R=Object(p.g)(z),W=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={signinCheck:!1,signedIn:!1},e._isMounted=!1,e.componentDidMount=function(){e._isMounted=!0,O.auth().onAuthStateChanged((function(t){t?e._isMounted&&e.setState({signinCheck:!0,signedIn:!0}):e._isMounted&&e.setState({signinCheck:!0,signedIn:!1})}))},e.componentWillUnmount=function(){e._isMounted=!1},e}return Object(r.a)(n,[{key:"render",value:function(){return this.state.signinCheck?this.state.signedIn?this.props.children:Object(L.jsx)(p.a,{to:"/login"}):Object(L.jsx)("div",{children:Object(L.jsxs)("span",{variant:"primary",disabled:!0,className:P.a.loading,children:[Object(L.jsx)(T.a,{as:"span",animation:"border",role:"status","aria-hidden":"true"}),Object(L.jsx)("span",{className:P.a.loadingLetter,children:"Loading..."})]})})}}]),n}(i.a.Component),q=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(L.jsx)(u.a,{children:Object(L.jsxs)(p.d,{children:[Object(L.jsx)(p.b,{exact:!0,path:"/login",component:R}),Object(L.jsx)(W,{children:Object(L.jsxs)(p.d,{children:[Object(L.jsx)(p.b,{exact:!0,path:"/",component:F}),Object(L.jsx)(p.b,{render:function(){return Object(L.jsx)("p",{children:"not found."})}})]})})]})})}}]),n}(i.a.Component),K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),s(e),c(e)}))};n(71);c.a.render(Object(L.jsx)(i.a.StrictMode,{children:Object(L.jsx)(q,{})}),document.getElementById("root")),K()}},[[72,1,2]]]);
//# sourceMappingURL=main.bafc6f52.chunk.js.map