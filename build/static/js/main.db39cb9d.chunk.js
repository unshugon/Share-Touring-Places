(this["webpackJsonpsharetouring-places"]=this["webpackJsonpsharetouring-places"]||[]).push([[0],{15:function(e,t,a){e.exports={container:"send_container__2Ple9",putImage:"send_putImage__26AlY",submit:"send_submit__1Csjy",putPlace:"send_putPlace__6efSF",putDescription:"send_putDescription__3FqjD",putImageLabel:"send_putImageLabel__3kucN",submitLabel:"send_submitLabel__SAoHj"}},17:function(e,t,a){e.exports={container:"print_container__1O0B7",printPlaces:"print_printPlaces__3brW2",title:"print_title__32tcE"}},25:function(e,t,a){e.exports={header:"Header_header__2XAj3"}},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(6),c=a.n(n),r=a(24),s=a.n(r),o=a(9),i=a(10),u=a(12),l=a(11),p=a(25),d=a.n(p),b=a(3),h=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(b.jsx)("h1",{className:d.a.header,children:"Share Touring Spot"})}}]),a}(c.a.Component),j=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(b.jsx)("div",{children:"\xa9\ufe0e 2021 Share Touring Spot"})}}]),a}(c.a.Component),m=a(14);a(45),a(44),a(46),a(35);m.a.initializeApp({apiKey:"AIzaSyBVnd60ekX4LpYPppbu9qZFLfLh1OStHOM",authDomain:"share-touring-plases.firebaseapp.com",projectId:"share-touring-plases",storageBucket:"share-touring-plases.appspot.com",messagingSenderId:"177272219186",appId:"1:177272219186:web:dfbd1c3ea441dbb1f5be2b"}),m.a.analytics(),m.a.auth().languageCode="it";var f=m.a.firestore(),g=f.collection("places"),O=m.a.storage(),v=(m.a.auth.TwitterAuthProvider(),m.a),_=a(17),x=a.n(_),y=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return f.collection("places").orderBy("created").onSnapshot((function(e){var t=document.getElementById("printPlaces");e.docChanges().forEach((function(e){if("added"===e.type){var a=document.createElement("li"),n=document.createElement("p"),c=document.createElement("img"),r=document.createElement("div");O.ref().child("images/".concat(e.doc.data().place,"_").concat(e.doc.data().description,".jpg")).getDownloadURL().then((function(e){c.src=e})).catch((function(e){e.code})),a.textContent=e.doc.data().place,n.textContent=e.doc.data().description,r.appendChild(c),r.appendChild(a),r.appendChild(n),t.prepend(r)}}))})),Object(b.jsxs)("div",{className:x.a.container,children:[Object(b.jsx)("h2",{className:x.a.title,children:"\u30c4\u30fc\u30ea\u30f3\u30b0\u30b9\u30dd\u30c3\u30c8\u4e00\u89a7"}),Object(b.jsx)("ul",{id:"printPlaces",className:x.a.printPlaces})]})}}]),a}(c.a.Component),C=a(20),I=a.n(C),S=a(27),k=a(15),N=a.n(k),P=a(28),D=a.n(P),E=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChangeFile=function(){var e=Object(S.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files,e.next=3,D()(a[0],{maxWidth:450,canvas:!0});case 3:e.sent.image.toBlob((function(e){n.setState({blob:e})}),a[0].type);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleFormChange=function(e){var t=e.target.value;n.setState({place:t})},n.handleDescChange=function(e){var t=e.target.value;n.setState({description:t})},n.state={place:"",description:"",image:null,progress:"\u753b\u50cf\u3092\u9078\u629e",blob:null},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=document.getElementById("putPlace"),a=document.getElementById("putDescription"),n=document.getElementById("putImage");return Object(b.jsxs)("div",{className:N.a.container,children:["\u304a\u3059\u3059\u3081\u30b9\u30dd\u30c3\u30c8\u3092\u6295\u7a3f",Object(b.jsxs)("form",{onSubmit:function(c){if(c.preventDefault(),""!==t.value&&""!==n.value){e.setState({progress:"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u4e2d..."});var r=v.storage().ref().child("images/".concat(e.state.place,"_").concat(e.state.description,".jpg")).put(e.state.blob);r.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case v.storage.TaskState.PAUSED:console.log("Upload is paused");break;case v.storage.TaskState.RUNNING:console.log("Upload is running")}}),(function(e){console.log(e)}),(function(){e.setState({progress:"\u753b\u50cf\u3092\u9078\u629e"}),r.snapshot.ref.getDownloadURL().then((function(){g.add({place:t.value,description:a.value,created:v.firestore.FieldValue.serverTimestamp()}).then((function(){t.value="",a.value="",t.focus()})).catch((function(e){console.log(e)}))}))}))}else t.focus()},children:[Object(b.jsx)("textarea",{id:"putPlace",className:N.a.putPlace,value:this.state.place,onChange:function(t){return e.handleFormChange(t)},placeholder:"\u5730\u540d\u3092\u5165\u529b..."}),Object(b.jsx)("br",{}),Object(b.jsx)("textarea",{id:"putDescription",className:N.a.putDescription,value:this.state.description,onChange:function(t){return e.handleDescChange(t)},placeholder:"\u304a\u3059\u3059\u3081\u30dd\u30a4\u30f3\u30c8\u3092\u5165\u529b..."}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{htmlFor:"putImage",className:N.a.putImageLabel,children:this.state.progress}),Object(b.jsx)("input",{id:"putImage",className:N.a.putImage,type:"file",accept:"image/*",onChange:function(t){return e.handleChangeFile(t)}}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{htmlFor:"submit",className:N.a.submitLabel,children:"\u6295\u7a3f"}),Object(b.jsx)("button",{id:"submit",className:N.a.submit})]})]})}}]),a}(c.a.Component),B=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(h,{}),Object(b.jsx)(E,{}),Object(b.jsx)(y,{}),Object(b.jsx)(j,{})]})}}]),a}(c.a.Component),L=(a(42),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(b.jsx)(B,{})}}]),a}(c.a.Component));s.a.render(Object(b.jsx)(L,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.db39cb9d.chunk.js.map