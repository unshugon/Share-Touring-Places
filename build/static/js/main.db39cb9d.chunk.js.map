{"version":3,"sources":["components/send.module.scss","components/print.module.scss","components/Header.module.scss","components/Header.js","components/Footer.js","Firebase.js","firebaseConfig.js","components/Print.js","components/Send.js","components/Main.js","components/App.js","index.js"],"names":["module","exports","Header","className","headerStyle","header","React","Component","Footer","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","analytics","auth","languageCode","db","firestore","places","collection","storage","TwitterAuthProvider","Print","orderBy","onSnapshot","snapshot","printPlaces","document","getElementById","docChanges","forEach","change","type","li","createElement","p","img","div","ref","child","doc","data","place","description","getDownloadURL","then","uri","src","catch","error","code","textContent","appendChild","prepend","printStyle","container","title","id","Send","props","handleChangeFile","event","a","files","target","loadImage","maxWidth","canvas","image","toBlob","blob","setState","handleFormChange","inputValue","value","handleDescChange","state","progress","putPlace","putDescription","putImage","sendStyle","onSubmit","preventDefault","uploadTask","put","on","bytesTransferred","totalBytes","console","log","TaskState","PAUSED","RUNNING","add","created","FieldValue","serverTimestamp","focus","this","onChange","placeholder","htmlFor","putImageLabel","accept","submitLabel","submit","Main","App","ReactDOM","render"],"mappings":"oHACAA,EAAOC,QAAU,CAAC,UAAY,wBAAwB,SAAW,uBAAuB,OAAS,qBAAqB,SAAW,uBAAuB,eAAiB,6BAA6B,cAAgB,4BAA4B,YAAc,4B,mBCAhQD,EAAOC,QAAU,CAAC,UAAY,yBAAyB,YAAc,2BAA2B,MAAQ,uB,mBCAxGD,EAAOC,QAAU,CAAC,OAAS,yB,wJCUZC,E,4JAPb,WACE,OACA,oBAAIC,UAAWC,IAAYC,OAA3B,oC,GAHiBC,IAAMC,WCSZC,E,4JATb,WACE,OACE,yE,GAHeF,IAAMC,W,gCCK3BE,IAASC,cCPqB,CAC5BC,OAAQ,0CACRC,WAAY,uCACZC,UAAW,uBACXC,cAAe,mCACfC,kBAAmB,eACnBC,MAAO,8CDETP,IAASQ,YACTR,IAASS,OAAOC,aAAe,KAExB,IAAMC,EAAKX,IAASY,YACdC,EAASF,EAAGG,WAAW,UACvBC,EAAUf,IAASe,UAEjBf,GADgBA,IAASS,KAAKO,sBAC9BhB,EAAf,G,iBEoDeiB,E,4JA9Db,WAqDE,OApDmBN,EAAGG,WAAW,UAEtBI,QAAQ,WAAWC,YAAW,SAACC,GACxC,IAAMC,EAAcC,SAASC,eAAe,eAE5CH,EAASI,aAAaC,SAAQ,SAACC,GAC7B,GAAmB,UAAhBA,EAAOC,KAAiB,CACzB,IAAMC,EAAKN,SAASO,cAAc,MAC5BC,EAAIR,SAASO,cAAc,KAC3BE,EAAMT,SAASO,cAAc,OAC7BG,EAAMV,SAASO,cAAc,OAChBd,EAAQkB,MACCC,MAAX,iBAA2BR,EAAOS,IAAIC,OAAOC,MAA7C,YAAsDX,EAAOS,IAAIC,OAAOE,YAAxE,SAERC,iBACNC,MAAK,SAACC,GACLV,EAAIW,IAAMD,KAEXE,OAAM,SAACC,GACEA,EAAMC,QAsBhBjB,EAAGkB,YAAcpB,EAAOS,IAAIC,OAAOC,MACnCP,EAAEgB,YAAcpB,EAAOS,IAAIC,OAAOE,YAElCN,EAAIe,YAAYhB,GAChBC,EAAIe,YAAYnB,GAChBI,EAAIe,YAAYjB,GAChBT,EAAY2B,QAAQhB,UAM1B,sBAAKtC,UAAWuD,IAAWC,UAA3B,UACE,oBAAIxD,UAAWuD,IAAWE,MAA1B,gFACA,oBAAIC,GAAG,cAAc1D,UAAWuD,IAAW5B,qB,GAzD/BxB,IAAMC,W,2DCmIXuD,E,kDAjIb,WAAYC,GAAO,IAAD,8BAChB,cAAMA,IAURC,iBAXkB,uCAWC,WAAOC,GAAP,eAAAC,EAAA,6DACTC,EAAUF,EAAMG,OAAhBD,MADS,SAEIE,IAAUF,EAAM,GAAI,CACvCG,SAAU,IACVC,QAAQ,IAJO,cAMVC,MAAMC,QAAO,SAACC,GACnB,EAAKC,SAAS,CAACD,KAAMA,MACpBP,EAAM,GAAG/B,MARK,2CAXD,wDAsBlBwC,iBAAmB,SAACX,GAClB,IAAMY,EAAaZ,EAAMG,OAAOU,MAChC,EAAKH,SAAS,CAAC7B,MAAO+B,KAxBN,EA2BlBE,iBAAmB,SAACd,GAClB,IAAMY,EAAaZ,EAAMG,OAAOU,MAChC,EAAKH,SAAS,CAAC5B,YAAa8B,KA3B5B,EAAKG,MAAQ,CACXlC,MAAO,GACPC,YAAa,GACbyB,MAAO,KACPS,SAAU,iCACVP,KAAM,MAPQ,E,0CAgClB,WAAU,IAAD,OACDQ,EAAWnD,SAASC,eAAe,YACnCmD,EAAiBpD,SAASC,eAAe,kBACzCoD,EAAWrD,SAASC,eAAe,YAuD3C,OACI,sBAAK7B,UAAWkF,IAAU1B,UAA1B,+EAEE,uBAAM2B,SAxDO,SAACrB,GAGhB,GAFAA,EAAMsB,iBAEgB,KAAnBL,EAASJ,OAAmC,KAAnBM,EAASN,MAArC,CAKA,EAAKH,SAAS,CAACM,SAAU,kDACzB,IAGMO,EADS/E,EAASe,UAAUkB,MAAMC,MAAzB,iBAAyC,EAAKqC,MAAMlC,MAApD,YAA6D,EAAKkC,MAAMjC,YAAxE,SACa0C,IAAI,EAAKT,MAAMN,MAE3Cc,EAAWE,GAAG,iBAAiB,SAAA7D,GAG7B,IAAMoD,EAAYpD,EAAS8D,iBAAmB9D,EAAS+D,WAAc,IAErE,OADAC,QAAQC,IAAI,aAAeb,EAAW,UAC9BpD,EAASmD,OACf,KAAKvE,EAASe,QAAQuE,UAAUC,OAC9BH,QAAQC,IAAI,oBACZ,MACF,KAAKrF,EAASe,QAAQuE,UAAUE,QAC9BJ,QAAQC,IAAI,yBAMf,SAAUzC,GACXwC,QAAQC,IAAIzC,MACX,WAvBuB,EAAKsB,SAAS,CAACM,SAAU,mCA0BjDO,EAAW3D,SAASa,IAAIM,iBAAiBC,MAAK,WAC5C3B,EAAO4E,IAAI,CACTpD,MAAOoC,EAASJ,MAChB/B,YAAaoC,EAAeL,MAC5BqB,QAAS1F,EAASY,UAAU+E,WAAWC,oBAExCpD,MAAK,WACJiC,EAASJ,MAAQ,GACjBK,EAAeL,MAAQ,GACvBI,EAASoB,WAEVlD,OAAM,SAAAC,GACLwC,QAAQC,IAAIzC,iBA3ChB6B,EAASoB,SAoDT,UACE,0BACAzC,GAAG,WACH1D,UAAWkF,IAAUH,SACrBJ,MAAOyB,KAAKvB,MAAMlC,MAClB0D,SAAU,SAACvC,GAAD,OAAW,EAAKW,iBAAiBX,IAC3CwC,YAAY,sCAEZ,uBACA,0BACA5C,GAAG,iBACH1D,UAAWkF,IAAUF,eACrBL,MAAOyB,KAAKvB,MAAMjC,YAClByD,SAAU,SAACvC,GAAD,OAAW,EAAKc,iBAAiBd,IAC3CwC,YAAY,0EAEZ,uBACA,uBAAOC,QAAQ,WAAWvG,UAAWkF,IAAUsB,cAA/C,SACGJ,KAAKvB,MAAMC,WAEd,uBACApB,GAAG,WACH1D,UAAWkF,IAAUD,SACrBhD,KAAK,OACLwE,OAAO,UACPJ,SAAU,SAACvC,GAAD,OAAW,EAAKD,iBAAiBC,MAE3C,uBACA,uBAAOyC,QAAQ,SAASvG,UAAWkF,IAAUwB,YAA7C,0BACA,wBAAQhD,GAAG,SAAS1D,UAAWkF,IAAUyB,mB,GA3HhCxG,IAAMC,WCgBVwG,E,4JAbb,WACE,OACE,gCACE,cAAC,EAAD,IAEA,cAAC,EAAD,IACA,cAAC,EAAD,IACA,cAAC,EAAD,W,GARWzG,IAAMC,WCGVyG,G,kKALb,WACE,OAAO,cAAC,EAAD,Q,GAFO1G,IAAMC,YCAxB0G,IAASC,OAAO,cAAC,EAAD,IAASnF,SAASC,eAAe,W","file":"static/js/main.db39cb9d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"send_container__2Ple9\",\"putImage\":\"send_putImage__26AlY\",\"submit\":\"send_submit__1Csjy\",\"putPlace\":\"send_putPlace__6efSF\",\"putDescription\":\"send_putDescription__3FqjD\",\"putImageLabel\":\"send_putImageLabel__3kucN\",\"submitLabel\":\"send_submitLabel__SAoHj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"print_container__1O0B7\",\"printPlaces\":\"print_printPlaces__3brW2\",\"title\":\"print_title__32tcE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2XAj3\"};","import React from \"react\";\nimport headerStyle from \"./Header.module.scss\";\n\nclass Header extends React.Component {\n  render() {\n    return (\n    <h1 className={headerStyle.header}>Share Touring Spot</h1>\n    );\n  }\n}\n\nexport default Header;\n","import React from \"react\";\n\nclass Footer extends React.Component {\n  render() {\n    return(\n      <div>\n        ©︎ 2021 Share Touring Spot\n      </div>\n    );\n  };\n}\n\nexport default Footer;\n","import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/analytics';\nimport 'firebase/storage';\nimport 'firebase/auth';\nimport {firebaseConfig} from \"./firebaseConfig\";\n\nfirebase.initializeApp(firebaseConfig);\nfirebase.analytics();\nfirebase.auth().languageCode = \"it\";\n\nexport const db = firebase.firestore();\nexport const places = db.collection('places');\nexport const storage = firebase.storage();\nexport const providerTwitter = firebase.auth.TwitterAuthProvider();\nexport default firebase;\n","export const firebaseConfig = {\n  apiKey: \"AIzaSyBVnd60ekX4LpYPppbu9qZFLfLh1OStHOM\",\n  authDomain: \"share-touring-plases.firebaseapp.com\",\n  projectId: \"share-touring-plases\",\n  storageBucket: \"share-touring-plases.appspot.com\",\n  messagingSenderId: \"177272219186\",\n  appId: \"1:177272219186:web:dfbd1c3ea441dbb1f5be2b\"\n};\n","import React from \"react\";\nimport {db, storage} from \"../../src/Firebase\";\nimport printStyle from \"./print.module.scss\";\n\nclass Print extends React.Component {\n  render() {\n    const collection = db.collection(\"places\");\n\n    collection.orderBy(\"created\").onSnapshot((snapshot) => {\n      const printPlaces = document.getElementById(\"printPlaces\");\n\n      snapshot.docChanges().forEach((change) => {\n        if(change.type === 'added'){\n          const li = document.createElement(\"li\");\n          const p = document.createElement(\"p\");\n          const img = document.createElement(\"img\");\n          const div = document.createElement(\"div\");\n          const storageRef = storage.ref();\n          const imageRef = storageRef.child(`images/${change.doc.data().place}_${change.doc.data().description}.jpg`);\n\n          imageRef.getDownloadURL()\n            .then((uri) => {\n              img.src = uri;\n            })\n            .catch((error) => {\n              switch (error.code) {\n                case 'storage/object-not-found':\n                  // File doesn't exist\n                  break;\n\n                case 'storage/unauthorized':\n                  // User doesn't have permission to access the object\n                  break;\n\n                case 'storage/canceled':\n                  // User canceled the upload\n                  break;\n\n                case 'storage/unknown':\n                  // Unknown error occurred, inspect the server response\n                  break;\n\n                default:\n                  break;\n              }\n            });\n\n            li.textContent = change.doc.data().place;\n            p.textContent = change.doc.data().description;\n\n            div.appendChild(img);\n            div.appendChild(li);\n            div.appendChild(p);\n            printPlaces.prepend(div);\n        };\n      });\n    });\n\n    return(\n      <div className={printStyle.container}>\n        <h2 className={printStyle.title}>ツーリングスポット一覧</h2>\n        <ul id=\"printPlaces\" className={printStyle.printPlaces}></ul>\n      </div>\n    );\n  };\n}\n\nexport default Print;\n","import React from \"react\";\nimport firebase, {places} from \"../../src/Firebase\";\nimport sendStyle from \"./send.module.scss\";\nimport loadImage from 'blueimp-load-image';\n\nclass Send extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      place: \"\",\n      description: \"\",\n      image: null,\n      progress: \"画像を選択\", \n      blob: null\n    }\n  };\n\n  handleChangeFile = async (event) => {\n    const { files } = event.target;\n    const canvas = await loadImage(files[0], {\n      maxWidth: 450,\n      canvas: true,\n    });\n    canvas.image.toBlob((blob) => {\n      this.setState({blob: blob});\n    }, files[0].type);\n  };\n\n  handleFormChange = (event) => {\n    const inputValue = event.target.value;\n    this.setState({place: inputValue});\n  };\n\n  handleDescChange = (event) => {\n    const inputValue = event.target.value;\n    this.setState({description: inputValue});\n  };\n\n  render() {\n    const putPlace = document.getElementById(\"putPlace\");\n    const putDescription = document.getElementById(\"putDescription\");\n    const putImage = document.getElementById(\"putImage\");\n    \n    const onSubmit = (event) => {\n      event.preventDefault();\n\n      if(putPlace.value === \"\" || putImage.value === \"\"){\n        putPlace.focus();\n        return;\n      };\n\n      this.setState({progress: \"アップロード中...\"});\n      const doneUpload = () => {this.setState({progress: \"画像を選択\"})};\n\n      let imageRef = firebase.storage().ref().child(`images/${this.state.place}_${this.state.description}.jpg`);\n      const uploadTask = imageRef.put(this.state.blob);\n\n      uploadTask.on('state_changed', snapshot =>{\n        // Observe state change events such as progress, pause, and resume\n        // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        console.log('Upload is ' + progress + '% done');\n        switch (snapshot.state) {\n          case firebase.storage.TaskState.PAUSED: // or 'paused'\n            console.log('Upload is paused');\n            break;\n          case firebase.storage.TaskState.RUNNING: // or 'running'\n            console.log('Upload is running');\n            break;\n\n          default:\n            break;\n        };\n      }, function (error) {\n        console.log(error);\n      }, function () {\n        doneUpload();\n        // Handle successful uploads on complete\n        uploadTask.snapshot.ref.getDownloadURL().then(() => {\n          places.add({\n            place: putPlace.value,\n            description: putDescription.value,\n            created: firebase.firestore.FieldValue.serverTimestamp()\n          })\n          .then(() => {\n            putPlace.value = \"\";\n            putDescription.value = \"\";\n            putPlace.focus();\n          })\n          .catch(error => {\n            console.log(error);\n          })\n        });\n      });\n    };\n\n  return(\n      <div className={sendStyle.container}>\n        おすすめスポットを投稿\n        <form onSubmit={onSubmit}>\n          <textarea\n          id=\"putPlace\"\n          className={sendStyle.putPlace}\n          value={this.state.place}\n          onChange={(event) => this.handleFormChange(event)}\n          placeholder=\"地名を入力...\"\n          />\n          <br/>\n          <textarea\n          id=\"putDescription\"\n          className={sendStyle.putDescription}\n          value={this.state.description}\n          onChange={(event) => this.handleDescChange(event)}\n          placeholder=\"おすすめポイントを入力...\"\n          />\n          <br/>\n          <label htmlFor=\"putImage\" className={sendStyle.putImageLabel}>\n            {this.state.progress}\n          </label>\n          <input\n          id=\"putImage\"\n          className={sendStyle.putImage}\n          type=\"file\"\n          accept=\"image/*\"\n          onChange={(event) => this.handleChangeFile(event)}\n          />\n          <br/>\n          <label htmlFor=\"submit\" className={sendStyle.submitLabel}>投稿</label>\n          <button id=\"submit\" className={sendStyle.submit}></button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Send;\n","import React from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Print from \"./Print\";\nimport Send from \"./Send\";\n// import Auth from\"./Auth\";\n\nclass Main extends React.Component {\n  render() {\n    return(\n      <div>\n        <Header />\n        {/* <Auth /> */}\n        <Send />\n        <Print />\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default Main;\n","import React from \"react\";\nimport Main from \"./Main\";\nimport appStyle from \"./app.module.scss\";\n\nclass App extends React.Component {\n  render() {\n    return <Main />;\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}