(this["webpackJsonpshate-touring-spot"]=this["webpackJsonpshate-touring-spot"]||[]).push([[0],{12:function(e,t,a){e.exports={container:"home_container__1nxKu",logout:"home_logout__2rfpM",header:"home_header__1JqHy",loading:"home_loading__3xLzJ",loadingLetter:"home_loadingLetter__fentm"}},22:function(e,t,a){e.exports={container:"send_container__b8jLI",putImage:"send_putImage__xhmR7",submit:"send_submit__2DNck",putPlace:"send_putPlace__u75bJ",putDescription:"send_putDescription__28p2m",putImageLabel:"send_putImageLabel__10g3a",submitLabel:"send_submitLabel__dsfa_"}},25:function(e,t,a){e.exports={container:"login_container__11d0V",twitter:"login_twitter__10FKh",anonymous:"login_anonymous__1JTzJ",header:"login_header__cqkmX"}},30:function(e,t,a){e.exports={container:"print_container__1baIC",printPlaces:"print_printPlaces__SypZh",title:"print_title__1zc15"}},52:function(e,t,a){},53:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(41),i=a.n(s),o=(a(52),a(15)),r=a(16),l=a(18),d=a(17),u=(a(53),a(28)),h=a(6),p=a(20);a(74),a(73),a(75),a(54);p.a.initializeApp({apiKey:"AIzaSyBVnd60ekX4LpYPppbu9qZFLfLh1OStHOM",authDomain:"share-touring-plases.firebaseapp.com",projectId:"share-touring-plases",storageBucket:"share-touring-plases.appspot.com",messagingSenderId:"177272219186",appId:"1:177272219186:web:dfbd1c3ea441dbb1f5be2b"}),p.a.analytics(),p.a.auth().languageCode="ja";var b=p.a.firestore(),j=b.collection("places"),g=p.a.storage(),m=p.a.auth(),f=new p.a.auth.TwitterAuthProvider,O=(p.a.auth().currentUser,p.a),x=a(78),_=a(12),v=a.n(_),y=a(4),C=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={signinCheck:!1,signedIn:!1},e.componentDidMount=function(){O.auth().onAuthStateChanged((function(t){t?e.setState({signinCheck:!0,signedIn:!0}):e.setState({signinCheck:!0,signedIn:!1})}))},e}return Object(r.a)(a,[{key:"render",value:function(){return this.state.signinCheck?this.state.signedIn?this.props.children:Object(y.jsx)(h.a,{to:"/login"}):Object(y.jsx)("div",{children:Object(y.jsxs)("span",{variant:"primary",disabled:!0,className:v.a.loading,children:[Object(y.jsx)(x.a,{as:"span",animation:"border",role:"status","aria-hidden":"true"}),Object(y.jsx)("span",{className:v.a.loadingLetter,children:"Loading..."})]})})}}]),a}(c.a.Component),S=a(77),N=a(35),I=a.n(N),L=a(44),k=a(22),w=a.n(k),U=a(45),D=a.n(U),P=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChangeFile=function(){var e=Object(L.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files,e.next=3,D()(a[0],{maxWidth:450,canvas:!0});case 3:e.sent.image.toBlob((function(e){n.setState({blob:e})}),a[0].type),n.state.blob;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleFormChange=function(e){var t=e.target.value;n.setState({place:t})},n.handleDescChange=function(e){var t=e.target.value;n.setState({description:t})},n.handleUpload=function(e){return n.props.handleUpload(e)},n.state={place:"",description:"",image:null,blob:null},n}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=document.getElementById("putPlace"),a=document.getElementById("putDescription"),n=document.getElementById("putImage"),c=this.props;return Object(y.jsxs)("div",{className:w.a.container,children:["\u304a\u3059\u3059\u3081\u30b9\u30dd\u30c3\u30c8\u3092\u6295\u7a3f",Object(y.jsxs)("form",{onSubmit:function(c){c.preventDefault();if(""!==t.value&&""!==n.value){e.handleUpload(!0);var s=O.storage().ref().child("images/".concat(e.state.place,"_").concat(e.state.description,".jpg")).put(e.state.blob);s.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case O.storage.TaskState.PAUSED:console.log("Upload is paused");break;case O.storage.TaskState.RUNNING:console.log("Upload is running")}}),(function(e){console.log(e)}),(function(){e.handleUpload(!1),s.snapshot.ref.getDownloadURL().then((function(){j.add({place:t.value,description:a.value,created:O.firestore.FieldValue.serverTimestamp(),user:m.currentUser.uid}).then((function(){t.value="",a.value="",t.focus()})).catch((function(e){console.log(e)}))}))}))}else t.focus()},children:[Object(y.jsx)("textarea",{id:"putPlace",className:w.a.putPlace,value:this.state.place,onChange:function(t){return e.handleFormChange(t)},placeholder:"\u5730\u540d\u3092\u5165\u529b..."}),Object(y.jsx)("br",{}),Object(y.jsx)("textarea",{id:"putDescription",className:w.a.putDescription,value:this.state.description,onChange:function(t){return e.handleDescChange(t)},placeholder:"\u304a\u3059\u3059\u3081\u30dd\u30a4\u30f3\u30c8\u3092\u5165\u529b..."}),Object(y.jsx)("br",{}),Object(y.jsx)("label",{htmlFor:"putImage",className:w.a.putImageLabel,children:null==this.state.blob?"\u753b\u50cf\u3092\u9078\u629e":"\u753b\u50cf\u3092\u5909\u66f4"}),Object(y.jsx)("input",{id:"putImage",className:w.a.putImage,type:"file",accept:"image/*",onChange:function(t){return e.handleChangeFile(t)}}),Object(y.jsx)("br",{}),Object(y.jsx)("label",{htmlFor:"submit",className:w.a.submitLabel,children:c.progress?"Uploading...":"\u6295\u7a3f"}),Object(y.jsx)("button",{id:"submit",className:w.a.submit})]})]})}}]),a}(c.a.Component),T=a(30),F=a.n(T),B=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return b.collection("places").orderBy("created").onSnapshot((function(e){var t=document.getElementById("printPlaces");e.docChanges().forEach((function(e){if("added"===e.type){var a=document.createElement("li"),n=document.createElement("p"),c=document.createElement("img"),s=document.createElement("div");g.ref().child("images/".concat(e.doc.data().place,"_").concat(e.doc.data().description,".jpg")).getDownloadURL().then((function(e){c.src=e})).catch((function(e){e.code})),a.textContent=e.doc.data().place,n.textContent=e.doc.data().description,s.appendChild(c),s.appendChild(a),s.appendChild(n),t.prepend(s)}}))})),Object(y.jsxs)("div",{className:F.a.container,children:[Object(y.jsx)("h2",{className:F.a.title,children:"\u30c4\u30fc\u30ea\u30f3\u30b0\u30b9\u30dd\u30c3\u30c8\u4e00\u89a7"}),Object(y.jsx)("ul",{id:"printPlaces",className:F.a.printPlaces})]})}}]),a}(c.a.Component),E=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleLogout=function(){O.auth().signOut()},n.handleUpload=function(e){n.setState({progress:e})},n.state={progress:!1},n}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return this.state.progress?Object(y.jsx)("div",{className:v.a.loadingContainer,children:Object(y.jsxs)("span",{variant:"primary",disabled:!0,className:v.a.loading,children:[Object(y.jsx)(x.a,{as:"span",animation:"border",role:"status","aria-hidden":"false"}),Object(y.jsx)("span",{className:v.a.loadingLetter,children:"Loading..."})]})}):Object(y.jsxs)("div",{className:v.a.container,children:[Object(y.jsx)("h1",{className:v.a.header,children:"Share Touring Spot"}),Object(y.jsx)(S.a,{onClick:this.handleLogout,className:v.a.logout,children:"\u30ed\u30b0\u30a2\u30a6\u30c8"}),Object(y.jsx)(P,{handleUpload:function(t){e.handleUpload(t)},hometState:this.state}),Object(y.jsx)(B,{})]})}}]),a}(c.a.Component),A=a(47),J=a(46),z=a(25),R=a.n(z),M=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={loading:!1},e.handleOnSubmitT=function(t){e.setState({loading:!0}),O.auth().signInWithRedirect(f).then((function(t){e.props.history.push("/"),e.setState({loading:!1})})).catch((function(t){e.setState({loading:!1}),alert(t)}))},e.handleOnSubmitA=function(t){e.setState({loading:!0}),O.auth().signInAnonymously().then((function(t){e.props.history.push("/"),e.setState({loading:!1})})).catch((function(t){e.setState({loading:!1}),alert(t)}))},e}return Object(r.a)(a,[{key:"render",value:function(){return this.state.loading?Object(y.jsx)("div",{className:v.a.loadingContainer,children:Object(y.jsxs)("span",{variant:"primary",disabled:!0,className:v.a.loading,children:[Object(y.jsx)(x.a,{as:"span",animation:"border",role:"status","aria-hidden":"false"}),Object(y.jsx)("span",{className:v.a.loadingLetter,children:"Loading..."})]})}):Object(y.jsx)("div",{className:R.a.container,children:Object(y.jsxs)("div",{className:R.a.wrapper,children:[Object(y.jsx)("h1",{className:R.a.header,children:"Share Touring Spot"}),Object(y.jsxs)("button",{onClick:this.handleOnSubmitT,id:"loginTwitter",className:R.a.twitter,children:[Object(y.jsx)(J.a,{icon:A.a})," Login with Twitter"]}),Object(y.jsx)("button",{onClick:this.handleOnSubmitA,className:R.a.anonymous,children:"\u533f\u540d\u30ed\u30b0\u30a4\u30f3"})]})})}}]),a}(c.a.Component),q=Object(h.g)(M),K=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return Object(y.jsx)(u.a,{children:Object(y.jsxs)(h.d,{children:[Object(y.jsx)(h.b,{exact:!0,path:"/login",component:q}),Object(y.jsx)(C,{children:Object(y.jsxs)(h.d,{children:[Object(y.jsx)(h.b,{exact:!0,path:"/",component:E}),Object(y.jsx)(h.b,{render:function(){return Object(y.jsx)("p",{children:"not found."})}})]})})]})})}}]),a}(c.a.Component),V=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,79)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),s(e),i(e)}))};a(71);i.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(K,{})}),document.getElementById("root")),V()}},[[72,1,2]]]);
//# sourceMappingURL=main.e4555eb4.chunk.js.map